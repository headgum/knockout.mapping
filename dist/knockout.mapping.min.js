!function(){"use strict";!function(C,F){"use strict";C.mapping=F;var f=false,R="__ko_mapping__",l=C.dependentObservable,i=0,$,G,u=["create","update","key","arrayChanged"],q={},e={include:["_destroy"],ignore:[],copy:[],observe:[]},s=e;function o(){var e=arguments,r=e.length,t={},n=[],a,i,u;while(r--){u=e[r];a=u.length;while(a--){i=u[a];if(!t[i]){t[i]=1;n.push(i)}}}return n}function p(e,r){var t;for(var n in r)if(r.hasOwnProperty(n)&&r[n]){t=F.getType(e[n]);if(n&&e[n]&&t!=="array"&&t!=="string")p(e[n],r[n]);else{var a=F.getType(e[n])==="array"&&F.getType(r[n])==="array";if(a)e[n]=o(e[n],r[n]);else e[n]=r[n]}}}function V(e,r){var t={};p(t,e);p(t,r);return t}function v(e,r){var t=V({},e);for(var n=u.length-1;n>=0;n--){var a=u[n];if(!t[a])continue;if(!(t[""]instanceof Object))t[""]={};t[""][a]=t[a];delete t[a]}if(r){t.ignore=c(r.ignore,t.ignore);t.include=c(r.include,t.include);t.copy=c(r.copy,t.copy);t.observe=c(r.observe,t.observe)}t.ignore=c(t.ignore,s.ignore);t.include=c(t.include,s.include);t.copy=c(t.copy,s.copy);t.observe=c(t.observe,s.observe);t.mappedProperties=t.mappedProperties||{};t.copiedProperties=t.copiedProperties||{};return t}function c(e,r){if(e===undefined)e=[];else if(F.getType(e)!=="array")e=[e];if(r===undefined)r=[];else if(F.getType(r)!=="array")r=[r];return C.utils.arrayGetDistinctValues(e.concat(r))}function z(o,e){var r=C.dependentObservable;C.dependentObservable=function(e,r,t){t=t||{};if(e&&typeof e==="object")t=e;var n=t.deferEvaluation;var a=t.pure;var i=false;var u=function(r){var e=C.dependentObservable;C.dependentObservable=l;var t=C.isWriteableObservable(r);C.dependentObservable=e;var n=l({read:function(){if(!i){C.utils.arrayRemoveItem(o,r);i=true}return r.apply(r,arguments)},write:t&&function(e){return r(e)},deferEvaluation:true});if(f)n._wrapper=true;n.__DO=r;return n};t.deferEvaluation=true;var s=l(e,r,t);if(!n&&!a){s=u(s);o.push(s)}return s};C.dependentObservable.fn=l.fn;C.computed=C.dependentObservable;var t=e();C.dependentObservable=r;C.computed=C.dependentObservable;return t}function B(i,u,s,n,r,o,e){var t=F.getType(C.utils.unwrapObservable(u))==="array";o=o||"";if(F.isMapped(i)){var a=C.utils.unwrapObservable(i)[R];s=V(a,s)}var f={data:u,parent:e||r};var l=function(){return s[n]&&s[n].create instanceof Function};var p=function(e){return z($,function(){if(C.utils.unwrapObservable(r)instanceof Array)return s[n].create({data:e||f.data,parent:f.parent,skip:q});else return s[n].create({data:e||f.data,parent:f.parent})})};var v=function(){return s[n]&&s[n].update instanceof Function};var c=function(e,r){var t={data:r||f.data,parent:f.parent,target:C.utils.unwrapObservable(e)};if(C.isWriteableObservable(e))t.observable=e;return s[n].update(t)};var d=G.get(u);if(d)return d;n=n||"";if(!t)if(!U(u))switch(F.getType(u)){case"function":if(v())if(C.isWriteableObservable(u)){u(c(u));i=u}else i=c(u);else i=u;break;default:if(C.isWriteableObservable(i)){var b;if(v()){b=c(i);i(b);return b}else{b=C.utils.unwrapObservable(u);i(b);return b}}else{var y=l()||v();if(l())i=p();else i=C.observable(C.utils.unwrapObservable(u));if(v())i(c(i));if(y)return i}}else{i=C.utils.unwrapObservable(i);if(!i)if(l()){var g=p();if(v())g=c(g);return g}else{if(v())return c();i={}}if(v())i=c(i);G.save(u,i);if(v())return i;Q(u,function(e){var r=o.length?o+"."+X(e):X(e);if(C.utils.arrayIndexOf(s.ignore,r)!==-1)return;if(C.utils.arrayIndexOf(s.copy,r)!==-1){i[e]=u[e];return}if(typeof u[e]!=="object"&&F.getType(u[e])!=="array"&&s.observe.length>0&&C.utils.arrayIndexOf(s.observe,r)===-1){i[e]=u[e];s.copiedProperties[r]=true;return}var t=G.get(u[e]);var n=B(i[e],u[e],s,e,i,r,i);var a=t||n;if(s.observe.length>0&&C.utils.arrayIndexOf(s.observe,r)===-1){i[e]=C.utils.unwrapObservable(a);s.copiedProperties[r]=true;return}if(C.isWriteableObservable(i[e])){a=C.utils.unwrapObservable(a);if(i[e]()!==a)i[e](a)}else{a=i[e]===undefined?a:C.utils.unwrapObservable(a);i[e]=a}s.mappedProperties[r]=true})}else{var O=[];var h=false;var w=function(e){return e};if(s[n]&&s[n].key){w=s[n].key;h=true}if(!C.isObservable(i)){i=C.observableArray([]);i.mappedRemove=function(r){var t=typeof r==="function"?r:function(e){return e===w(r)};return i.remove(function(e){return t(w(e))})};i.mappedRemoveAll=function(e){var r=L(e,w);return i.remove(function(e){return C.utils.arrayIndexOf(r,w(e))!==-1})};i.mappedDestroy=function(r){var t=typeof r==="function"?r:function(e){return e===w(r)};return i.destroy(function(e){return t(w(e))})};i.mappedDestroyAll=function(e){var r=L(e,w);return i.destroy(function(e){return C.utils.arrayIndexOf(r,w(e))!==-1})};i.mappedIndexOf=function(e){var r=L(i(),w);var t=w(e);return C.utils.arrayIndexOf(r,t)};i.mappedGet=function(e){return i()[i.mappedIndexOf(e)]};i.mappedCreate=function(e){if(i.mappedIndexOf(e)!==-1)throw new Error("There already is an object with the key that you specified.");var r=l()?p(e):e;if(v()){var t=c(r,e);if(C.isWriteableObservable(r))r(t);else r=t}i.push(r);return r}}var m=L(C.utils.unwrapObservable(i),w).sort();var T=L(u,w);if(h)T.sort();var k=C.utils.compareArrays(m,T);var x={};var I,j,E;var P=C.utils.unwrapObservable(u);var _={};var J=true;for(I=0,j=P.length;I<j;I++){E=w(P[I]);if(E===undefined||E instanceof Object){J=false;break}_[E]=P[I]}var W=[];var D=0;var S,A;for(I=0,j=k.length;I<j;I++){E=k[I];var N;var M=o+"["+X(I)+"]";switch(E.status){case"added":S=J?_[E.value]:K(C.utils.unwrapObservable(u),E.value,w);N=B(undefined,S,s,n,i,M,r);if(!l())N=C.utils.unwrapObservable(N);A=H(C.utils.unwrapObservable(u),S,x);if(N===q)D++;else W[A-D]=N;x[A]=true;break;case"retained":S=J?_[E.value]:K(C.utils.unwrapObservable(u),E.value,w);N=K(i,E.value,w);B(N,S,s,n,i,M,r);A=H(C.utils.unwrapObservable(u),S,x);W[A]=N;x[A]=true;break;case"deleted":N=K(i,E.value,w);break}O.push({event:E.status,item:N})}i(W);if(s[n]&&s[n].arrayChanged)C.utils.arrayForEach(O,function(e){s[n].arrayChanged(e.event,e.item)})}return i}function H(e,r,t){for(var n=0,a=e.length;n<a;n++){if(t[n]===true)continue;if(e[n]===r)return n}return null}function d(e,r){var t;if(r)t=r(e);if(F.getType(t)==="undefined")t=e;return C.utils.unwrapObservable(t)}function K(e,r,t){e=C.utils.unwrapObservable(e);for(var n=0,a=e.length;n<a;n++){var i=e[n];if(d(i,t)===r)return i}throw new Error("When calling ko.update*, the key '"+r+"' was not found!")}function L(e,r){return C.utils.arrayMap(C.utils.unwrapObservable(e),function(e){if(r)return d(e,r);else return e})}function Q(e,r){if(F.getType(e)==="array")for(var t=0;t<e.length;t++)r(t);else for(var n in e)if(e.hasOwnProperty(n))r(n)}function U(e){if(e===null)return false;var r=F.getType(e);return r==="object"||r==="array"}function b(e,r,t){var n=e||"";if(F.getType(r)==="array"){if(e)n+="["+X(t)+"]"}else{if(e)n+=".";n+=X(t)}return n}function X(e){var r=(""+e).replace(/~/g,"~~").replace(/\[/g,"~[").replace(/]/g,"~]").replace(/\./g,"~.");return r}function a(){var n=[];var a=[];this.save=function(e,r){var t=C.utils.arrayIndexOf(n,e);if(t>=0)a[t]=r;else{n.push(e);a.push(r)}};this.get=function(e){var r=C.utils.arrayIndexOf(n,e);var t=r>=0?a[r]:undefined;return t}}function y(){var n={};var t=function(e){var r;try{r=e}catch(e){r="$$$"}var t=n[r];if(!n.hasOwnProperty(r)){t=new a;n[r]=t}return t};this.save=function(e,r){t(e).save(e,r)};this.get=function(e){return t(e).get(e)}}F.isMapped=function(e){var r=C.utils.unwrapObservable(e);return r&&r[R]},F.fromJS=function(e){if(arguments.length===0)throw new Error("When calling ko.fromJS, pass the object you want to convert.");try{if(!i){$=[];G=new y}i++;var r;var t;if(arguments.length===2)if(arguments[1][R])t=arguments[1];else r=arguments[1];if(arguments.length===3){r=arguments[1];t=arguments[2]}if(t)r=V(r,t[R]);r=v(r);var n=B(t,e,r);if(t)n=t;if(!--i)while($.length){var a=$.pop();if(a){a();a.__DO["throttleEvaluation"]=a["throttleEvaluation"]}}n[R]=V(n[R],r);return n}catch(e){i=0;throw e}},F.fromJSON=function(e){var r=Array.prototype.slice.call(arguments,0);r[0]=C.utils.parseJson(e);return F.fromJS.apply(this,r)},F.toJS=function(e,r){if(!s)F.resetDefaultOptions();if(arguments.length===0)throw new Error("When calling ko.mapping.toJS, pass the object you want to convert.");if(F.getType(s.ignore)!=="array")throw new Error("ko.mapping.defaultOptions().ignore should be an array.");if(F.getType(s.include)!=="array")throw new Error("ko.mapping.defaultOptions().include should be an array.");if(F.getType(s.copy)!=="array")throw new Error("ko.mapping.defaultOptions().copy should be an array.");r=v(r,e[R]);return F.visitModel(e,function(e){return C.utils.unwrapObservable(e)},r)},F.toJSON=function(e,r,t,n){var a=F.toJS(e,r);return C.utils.stringifyJson(a,t,n)},F.defaultOptions=function(){if(arguments.length>0)s=arguments[0];else return s},F.resetDefaultOptions=function(){s={include:e.include.slice(0),ignore:e.ignore.slice(0),copy:e.copy.slice(0),observe:e.observe.slice(0)}},F.getType=function(e){if(e&&typeof e==="object"){if(e.constructor===Date)return"date";if(e.constructor===Array)return"array"}return typeof e},F.visitModel=function(e,s,o){o=o||{};o.visitedObjects=o.visitedObjects||new y;var f;var l=C.utils.unwrapObservable(e);if(!U(l))return s(e,o.parentName);else{o=v(o,l[R]);s(e,o.parentName);f=F.getType(l)==="array"?[]:{}}o.visitedObjects.save(e,f);var p=o.parentName;Q(l,function(e){var r=X(e);if(o.ignore&&C.utils.arrayIndexOf(o.ignore,r)!==-1)return;var t=l[e];o.parentName=b(p,l,e);if(C.utils.arrayIndexOf(o.copy,r)===-1)if(C.utils.arrayIndexOf(o.include,r)===-1){var n=l[R];if(n){var a=n.mappedProperties;if(a&&!a[r]){var i=n.copiedProperties;if(i&&!i[r]&&F.getType(l)!=="array")return}}}switch(F.getType(C.utils.unwrapObservable(t))){case"object":case"array":case"undefined":var u=o.visitedObjects.get(t);f[e]=F.getType(u)!=="undefined"?u:F.visitModel(t,s,o);break;default:f[e]=s(t,o.parentName)}});return f}}(require("@tko/build.reference/dist/build.reference"),exports)}();
//# sourceMappingURL=knockout.mapping.min.js.map
